<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="ko" lang="ko">

<head>
  <meta name="viewport" content="width=device-width; initial-scale=1.0;">
  <meta http-equiv="content-type" content="text/html; charset=utf-8" />
  <title>Graft.jl - General purpose graph analytics for Julia</title>
  <meta name="author" content="Jeff Bezanson, Stefan Karpinski, Viral Shah, Alan Edelman, et al." />
  <link rel="stylesheet" href="/css/syntax.css" type="text/css" />
  <link rel="stylesheet" href="/css/screen.css" type="text/css" media="screen, projection" />
  <link rel="stylesheet" href="/css/custom.css" type="text/css" media="screen, projection" />

  <!-- 단어 단위 줄바꿈  -->
  <script type="text/javascript" src="/js/jquery-1.8.3.min.js"></script>
  <script type="text/javascript" src="/js/jquery.word-break-keep-all.min.js"></script>
  <script type="text/javascript">
    $(document).ready(function() {
      $('p').wordBreakKeepAll();
    });
  </script>

  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-110655381-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-110655381-1'); // juliakorea 추적 ID
  </script>
</head>

<body>
  <div id="site" class="site">
    
    <div class="title"><a href="/">
<svg version="1.1" id="Layer_1"
	 xmlns="http://www.w3.org/2000/svg"
	 xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
	 width="210px" height="142px" viewBox="0 0 310 216" enable-background="new 0 0 310 216"
	 xml:space="preserve">

<!-- blue dot -->
<circle fill="#6b85dd" stroke="#4266d5" stroke-width="3" cx="50.5" cy="60" r="16.5"/>
<!-- red dot -->
<circle fill="#d66661" stroke="#c93d39" stroke-width="3" cx="212.459" cy="60" r="16.5"/>
<!-- green dot -->
<circle fill="#6bab5b" stroke="#3b972e" stroke-width="3" cx="233.834" cy="23.874" r="16.5"/>
<!-- purple dot -->
<circle fill="#aa7dc0" stroke="#945bb0" stroke-width="3" cx="255.209" cy="60" r="16.5"/>

<!-- "j" -->
<path fill="#252525" d="M37.216,138.427c0-15.839,0.006-31.679-0.018-47.517c-0.001-0.827,0.169-1.234,1.043-1.47
	c7.876-2.127,15.739-4.308,23.606-6.47c1.33-0.366,1.333-0.36,1.333,1.019c0,25.758,0.015,51.517-0.012,77.274
	c-0.006,5.514,0.245,11.032-0.272,16.543c-0.628,6.69-2.15,13.092-6.438,18.506c-3.781,4.771-8.898,7.25-14.767,8.338
	c-6.599,1.222-13.251,1.552-19.934,0.938c-4.616-0.423-9.045-1.486-12.844-4.363c-2.863-2.168-4.454-4.935-3.745-8.603
	c0.736-3.806,3.348-5.978,6.861-7.127c2.262-0.74,4.628-0.872,6.994-0.53c1.823,0.264,3.42,1.023,4.779,2.288
	c1.38,1.284,2.641,2.674,3.778,4.177c0.872,1.15,1.793,2.256,2.991,3.086c2.055,1.426,4,0.965,5.213-1.216
	c0.819-1.473,0.997-3.106,1.173-4.731c0.255-2.348,0.255-4.707,0.256-7.062C37.218,167.145,37.216,152.786,37.216,138.427z"/>

<!-- "u" -->
<path fill="#252525" d="M125.536,162.479c-2.908,2.385-5.783,4.312-8.88,5.904c-10.348,5.323-20.514,4.521-30.324-1.253
	c-6.71-3.95-11.012-9.849-12.52-17.606c-0.236-1.213-0.363-2.438-0.363-3.688c0.01-19.797,0.017-39.593-0.02-59.39
	c-0.002-1.102,0.285-1.357,1.363-1.351c7.798,0.049,15.597,0.044,23.396,0.003c0.95-0.005,1.177,0.25,1.175,1.183
	c-0.027,19.356-0.025,38.713-0.018,58.07c0.002,6.34,3.599,10.934,9.672,12.42c2.13,0.521,4.19,0.396,6.173-0.6
	c4.26-2.139,7.457-5.427,10.116-9.307c0.333-0.487,0.224-1,0.224-1.51c0.007-19.635,0.016-39.271-0.02-58.904
	c-0.002-1.083,0.255-1.369,1.353-1.361c7.838,0.052,15.677,0.045,23.515,0.004c0.916-0.005,1.103,0.244,1.102,1.124
	c-0.025,27.677-0.026,55.353,0.002,83.024c0.001,0.938-0.278,1.099-1.139,1.095c-7.918-0.028-15.837-0.028-23.756-0.001
	c-0.815,0.003-1.1-0.166-1.073-1.037C125.581,167.117,125.536,164.928,125.536,162.479z"/>

<!-- "l" -->
<path fill="#252525" d="M187.423,107.08c0,20.637-0.011,41.273,0.026,61.91c0.003,1.119-0.309,1.361-1.381,1.355
	c-7.799-0.052-15.598-0.047-23.396-0.008c-0.898,0.008-1.117-0.222-1.115-1.115c0.021-39.074,0.021-78.147,0-117.226
	c0-0.811,0.189-1.169,1.006-1.392c7.871-2.149,15.73-4.327,23.584-6.545c1.045-0.295,1.308-0.17,1.306,0.985
	C187.412,65.727,187.423,86.403,187.423,107.08z"/>

<!-- "i" -->
<path fill="#252525" d="M223.46,126.477c0,14.155-0.011,28.312,0.021,42.467c0.002,1.027-0.164,1.418-1.332,1.408
	c-7.838-0.061-15.676-0.047-23.516-0.01c-0.881,0.004-1.121-0.189-1.119-1.104c0.026-26.153,0.025-52.307,0-78.458
	c0-0.776,0.203-1.101,0.941-1.302c7.984-2.172,15.972-4.35,23.938-6.596c1.049-0.296,1.08,0.031,1.078,0.886
	C223.454,98.004,223.46,112.239,223.46,126.477z"/>

<!-- "a" -->
<path fill="#252525" d="M277.695,163.6c-0.786,0.646-1.404,1.125-2,1.635c-4.375,3.746-9.42,5.898-15.16,6.42
	c-5.792,0.527-11.479,0.244-16.934-2.047c-12.08-5.071-15.554-17.188-11.938-27.448c1.799-5.111,5.472-8.868,9.831-11.94
	c5.681-4.003,12.009-6.732,18.504-9.074c5.576-2.014,11.186-3.939,16.955-5.347c0.445-0.104,0.773-0.243,0.757-0.854
	c-0.136-4.389,0.261-8.79-0.479-13.165c-1.225-7.209-6.617-10.013-12.895-9.348c-0.516,0.055-1.029,0.129-1.536,0.241
	c-4.877,1.081-7.312,4.413-7.374,10.127c-0.02,1.729-0.229,3.418-0.693,5.084c-0.906,3.229-2.969,5.354-6.168,6.266
	c-3.422,0.979-6.893,0.998-10.23-0.305c-6.529-2.543-8.877-10.164-5.12-16.512c2.249-3.799,5.606-6.4,9.461-8.405
	c6.238-3.246,12.914-4.974,19.896-5.537c7.565-0.61,15.096-0.366,22.49,1.507c4.285,1.085,8.312,2.776,11.744,5.657
	c4.473,3.749,6.776,8.647,6.812,14.374c0.139,21.477,0.096,42.951,0.143,64.428c0.002,0.799-0.248,0.983-1.021,0.98
	c-8.035-0.025-16.074-0.023-24.113-0.001c-0.716,0.002-0.973-0.146-0.941-0.915C277.736,167.562,277.695,165.698,277.695,163.6z
	 M277.695,126.393c-4.793,2.104-9.25,4.373-13.287,7.408c-2.151,1.618-4.033,3.483-5.732,5.581
	c-4.229,5.226-1.988,13.343,1.693,16.599c1.592,1.406,3.359,1.906,5.419,1.521c1.621-0.307,3.149-0.857,4.549-1.734
	c1.521-0.951,2.949-2.072,4.539-2.887c2.31-1.18,2.97-2.861,2.894-5.445C277.561,140.484,277.695,133.527,277.695,126.393z"/>

</svg>

</a></div>

<ul class="links">
  
      
      
      
      
      
      <li><a href="/" class=" ">홈</a></li>
  
      
      
      
      
      
      <li><a href="https://github.com/JuliaLang/julia" class=" ">소스코드</a></li>
  
      
      
      
      
      
      <li><a href="/downloads/" class=" ">다운로드</a></li>
  
      
      
      
      
      
      <li><a href="/ko/latest/" class=" docs">문서</a></li>
  
      
      
      
      
      
      <li><a href="http://pkg.julialang.org/" class=" ">패키지</a></li>
  
      
      
      
      
      
      <li><a href="/blog/" class="active ">블로그</a></li>
  
      
      
      
      
      
      <li><a href="/community/" class=" ">커뮤니티</a></li>
  
      
      
      
      
      
      <li><a href="/ecosystems" class=" ">생태계</a></li>
  
      
      
      
      
      
      <li><a href="/learning/" class=" ">배우기</a></li>
  
      
      
      
      
      
      <li><a href="/teaching/" class=" ">강의</a></li>
  
      
      
      
      
      
      <li><a href="/publications/" class=" ">논문</a></li>
  
      
      
      
      
      
      <li><a href="/soc/ideas-page.html" class=" ">GSoC</a></li>
  
      
      
      
      
      
      <li><a href="http://juliacon.org" class=" ">줄리아컨퍼런스</a></li>
  
</ul>

<!--

<style>
.banner-box .header {
  font-size: 1.5em;
}
@media (min-width: 830px) {
  .banner-box {
    float:left;
    width:50%;
  }
}
</style>

<div style="text-align:center">

<div class="banner-box">
<div class="header">JuliaCon 2016</div>
<p>
  Held on June 21<sup>st</sup> - 25<sup>th</sup> at MIT<br>
  <a href="http://juliacon.org">talks</a> |
  <a href="https://www.youtube.com/playlist?list=PLP8iPy9hna6SQPwZUDtAM59-wPzCPyD_S">videos</a>
</p>
</div>

<div class="banner-box">
<div class="header">Google Summer of Code</div>
<p>
  Julia gets 12 slots in the Google Summer of Code!<br />
  <a href="https://summerofcode.withgoogle.com/organizations/6453977159827456/">projects</a> |
  <a href="/soc/ideas-page.html">ideas list</a>
</p>
</div>

<div style="clear:both; border-top: 1px solid #ddd; margin-bottom:30px;"></div>


</div>
-->


<div id="blogpost">
  <h1>Graft.jl - General purpose graph analytics for Julia</h1>

  <p class="metadata">
    <span class="timestamp">22 Aug 2016</span>
    
    &nbsp;|&nbsp;
    <span class="author"><a href="https://github.com/pranavtbhat">Pranav Thulasiram Bhat</a></span>
    
  </p>

  <p>This blog post describes my work on <a href="https://github.com/pranavtbhat/Graft.jl">Graft.jl</a>, a general purpose graph analysis package for Julia. For those unfamiliar with graph algorithms, a quick <a href="https://www.cl.cam.ac.uk/teaching/1011/PrincComm/slides/graph_theory_1-11.pdf">introduction</a> might help.</p>

<h1 id="proposal">Proposal</h1>
<p>My proposal, titled <a href="https://github.com/pranavtbhat/Gsoc2016/blob/master/Proposal.md">ParallelGraphs</a>, was to develop a parallelized/distributed graph algorithms
library. However, in the first month or so, we decided to work towards a more general framework that supports data analysis on
networks (graphs with attributes defined on vertices and edges).
Our change in direction was mainly motivated by:</p>

<ul>
  <li>The challenges associated with distributed graph computations. <a href="http://www.frankmcsherry.org/graph/scalability/cost/2015/01/15/COST.html">This</a>
blog post was an eye opener.</li>
  <li>Only very large graphs, of the order of terabytes or petabytes, require distributed execution. Most useful graphs can be analyzed on a single compute node.</li>
  <li>Multi-threading is under heavy development, and we decided to wait for the full multi-threaded programming model to be available.</li>
  <li>As we looked at public datasets, we felt that the ability to combine graph theoretic analyses with real world data was the missing piece in Julia. <a href="https://github.com/JuliaGraphs/LightGraphs.jl">LightGraphs.jl</a> already provides fast implementations for most graph algorithms, so we decided to target
graph data analysis.</li>
</ul>

<p>The modified proposal could be summarized as the development of a package that supports:</p>

<ul>
  <li>Vertex and edge metadata : Key value pairs for vertices and edges.</li>
  <li>Vertex labelling : Allow vertices to be referenced, externally, through arbitrary Julia types.</li>
  <li>SQL like queries for edge data and metadata.</li>
  <li>Compatibility with <code class="highlighter-rouge">LightGraphs</code></li>
</ul>

<h1 id="graft">Graft</h1>
<p><code class="highlighter-rouge">ParallelGraphs</code> turned out to be a misnomer, since we were moving towards a more general purpose data analysis framework. So we chose the name <code class="highlighter-rouge">Graft</code>, a kind of abbreviation for Graph Toolkit. The following sections detail <code class="highlighter-rouge">Graft's</code> features:</p>

<h2 id="vertex-and-edge-metadata">Vertex and Edge Metadata</h2>
<p>Graphs are often representations of real world entities, and the relationships between them. Such entities (and their relationships), often have data attached to them.
While it is quite straightforward to store vertex data (a simple table will suffice), storing edges and their data is very tricky. The data should be structured on the
source and target vertices, should support random access and should be vectorized for queries.</p>

<p>At first we tried placing the edge data in a SparseMatrixCSC. This turned out to be a bad idea, because sparse matrices are designed for numeric storage.
A simpler solution is to store edge metadata in a DataFrame, and have a SparseMatrixCSC map edges onto indices for the DataFrame. This strategy needed a lot less
code, and the benchmarks were more promising. Mutations such as the addition or removal of vertices and edges become more complicated however.</p>

<h2 id="vertex-labelling">Vertex Labelling</h2>
<p>Most graph libraries do not support vertex labelling. It can be very confusing to refer to a vertex by its (often long) integer identifier. It is also
computationally expensive to use non-integer labels in the implementation of the package (any such implementation would involve dictionaries). There is no reason, however,
for the user to have to use integer labels externally. Graft supports two modes of vertex labelling. By default, a vertex is identified by its internal identifier. A user
can assign labels of any arbitrary Julia type to identify vertices, overriding the internal identifiers. This strategy, we feel, makes a reasonable compromise between
user experience and performance.</p>

<p>If vertex labels were used in the internal implementation, the graph data structure would probably look like this:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  Dict(
     "Alice" =&gt; Dict(
        "age" =&gt; 34,
        "occupation"  =&gt; "Doctor",
        "adjacencies" =&gt; Dict("Bob" =&gt; Dict("relationship" =&gt; "follow")))
     ),
     "Bob" =&gt; Dict(
        "age" =&gt; 36,
        "occupation"  =&gt; "Software Engineer",
        "adjacencies" =&gt; Dict("Charlie" =&gt; Dict("relationship" =&gt; "friend"))
     ),
     "Charlie" =&gt; Dict(
        "age" =&gt; 30,
        "occupation"  =&gt; "Lawyer",
        "adjacencies" =&gt; Dict("David" =&gt; Dict("relationship" =&gt; "follow"))
     ),
     "David" =&gt; Dict(
        "age" =&gt; 29,
        "occupation" =&gt; "Athlete",
        "adjacencies" =&gt; Dict("Alice" =&gt; Dict("relationship" =&gt; "friend"))
     )
  )
</code></pre></div></div>

<p>Cleary, using labels internally is a very bad idea. Any sort of data access would set off multiple dictionary look-ups. Instead, if a bidirectional map
could be used to translate labels into vertex identifiers and back, the number of dictionary lookups could be reduced to one. The data would also be better structured for query processing.</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # Label Map to resolve queries
  LabelMap(
     # Forward map : labels to vertex identifiers
     Dict("Alice" =&gt; 1, "David" =&gt; 4", "Charlie" =&gt; 3, Bob" =&gt; 2),

     # Reverse map : vertex identifiers to labels
     String["Alice, "Bob", "Charlie", "David"]
  )

  # Vertex DataFrame
  4×2 DataFrames.DataFrame
  │ Row │ age │ occupation          │
  ├─────┼─────┼─────────────────────┤
  │ 1   │ 34  │ "Doctor"            │
  │ 2   │ 36  │ "Software Engineer" │
  │ 3   │ 30  │ "Lawyer"            │
  │ 4   │ 29  │ "Athlete"           │

  # SparseMatrixCSC : maps edges onto indices into Edge DataFrame
  4×4 sparse matrix with 4 Int64 nonzero entries:
     [4, 1]  =  1
     [1, 2]  =  2
     [2, 3]  =  3
     [3, 4]  =  4

  # Edge DataFrame
  4×1 DataFrames.DataFrame
  │ Row │ relationship │
  ├─────┼──────────────┤
  │ 1   │ "follow"     │
  │ 2   │ "friend"     │
  │ 3   │ "follow"     │
  │ 4   │ "friend"     │
</code></pre></div></div>

<h2 id="sql-like-queries">SQL Like Queries</h2>
<p>Graft’s query notation is borrowed from <a href="https://github.com/davidagold/jplyr.jl">Jplyr</a>. The <code class="highlighter-rouge">@query</code> macro is used to simplify the query syntax, and
accepts a pipeline of abstractions separated by the pipe operator <code class="highlighter-rouge">|&gt;</code>. The stages are described through abstractions:</p>

<h3 id="eachvertex">eachvertex</h3>
<p>Accepts an expression, that is run over every vertex. Vertex properties can be expressed using the dot notation. Some reserved properties are <code class="highlighter-rouge">v.id</code>, <code class="highlighter-rouge">v.label</code>,
<code class="highlighter-rouge">v.adj</code>, <code class="highlighter-rouge">v.indegree</code> and <code class="highlighter-rouge">v.outdegree</code>.
Examples:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # Check if the user has overridden the default labels
  julia&gt; @query(g |&gt; eachvertex(v.id == v.label)) |&gt; all

  # Kirchoff's law :P
  julia&gt; @query(g |&gt; eachvertex(v.outdegree - v.indegree)) .== 0
</code></pre></div></div>

<h3 id="eachedge">eachedge</h3>
<p>Accepts an expression, that is run over every edge. The symbol <code class="highlighter-rouge">s</code> is used to denote
the source vertex, and <code class="highlighter-rouge">t</code> is used to denote the target vertex in the edge. The symbol <code class="highlighter-rouge">e</code> is used to denote
the edge itself. Edge properties can be expressed through the dot notation. Some reserved properties are <code class="highlighter-rouge">e.source</code>, <code class="highlighter-rouge">e.target</code>, <code class="highlighter-rouge">e.mutualcount</code>, and <code class="highlighter-rouge">e.mutual</code>.
Examples:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # Arithmetic expression on edge, source and target properties
  julia&gt; @query g |&gt; eachedge(e.p1 - s.p1 - t.p1)


  # Check if constituent vertices have the same outdegree
  julia&gt; @query g |&gt; eachedge(s.outdegree == t.outdegree)


  # Count the number of "mutual friends" between the source and target vertices in each edge
  julia&gt; @query g |&gt; eachedge(e.mutualcount)
</code></pre></div></div>

<h3 id="filter">filter</h3>
<p>Accepts vertex or edge expressions and computes subgraphs with a subset of vertices, or a subset
of edges, or both.
Examples:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # Remove vertices where property p1 equals property p2
  @query g |&gt; filter(v.p1 != v.p2)

  # Remove self loops from the graph
  @query g |&gt; filter(e.source != e.target)
</code></pre></div></div>

<h3 id="select">select</h3>
<p>Returns a subgraph with a subset of vertex properties, or a subset of edge properties or both.
Examples:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  # Preserve vertex properties p1, p2 and nothing else
  @query g |&gt; select(v.p1, v.p2)

  # Preserve vertex property p1 and edge property p2
  @query g |&gt; select(v.p1, e.p2)
</code></pre></div></div>

<h1 id="demonstration">Demonstration</h1>
<p>The typical workflow we hope to support with <code class="highlighter-rouge">Graft</code> is:</p>

<ul>
  <li>Load a graph from memory</li>
  <li>Use the query abstractions to construct new vertex/edge properties or obtain subgraphs.</li>
  <li>Run complex queries on the subgraphs, or export data to <code class="highlighter-rouge">LightGraphs</code> and run computationally expensive algorithms there.</li>
  <li>Bring the data back into <code class="highlighter-rouge">Graft</code> as a new property, or use it to modify the graphs structure.</li>
</ul>

<p>The following examples should demonstrate this workflow:</p>

<ul>
  <li><a href="https://github.com/pranavtbhat/Graft.jl/blob/master/examples/google%2B.ipynb">Google+</a>: This demo uses a real, somewhat large, dataset with plenty of text data.</li>
  <li><a href="https://github.com/pranavtbhat/Graft.jl/blob/master/examples/baseball.ipynb">Baseball Players</a>: Two separate datasets spliced together, a table on baseball players
and a trust network. The resulting data is quite absurd, but does a good job of showing the quantitative queries Graft can run.</li>
</ul>

<h1 id="future-work">Future Work</h1>
<ul>
  <li>Graph IO : Support more graph file formats.</li>
  <li>Improve the query interface: The current pipelined macro based syntax has a learning curve, and the macro itself does some eval at runtime. We would like to move towards a cleaner composable syntax, that will pass off as regular Julia commands.</li>
  <li>New abstractions, such as Group-by, sort, and table output.</li>
  <li>Database backends : A RDBMS can be used instead of the DataFrames. Or Graft can serve as a wrapper on a GraphDB such as Neo4j.</li>
  <li>Integration with ComputeFramework for out of core processing. Support for parallelized IO, traversals and queries.</li>
</ul>

<p>More information can be found <a href="https://github.com/pranavtbhat/Graft.jl/issues">here</a></p>

<h1 id="acknowledgements">Acknowledgements</h1>
<p>This work was carried out as part of the Google Summer of Code program, under the guidance of mentors: <a href="https://github.com/viralbshah">Viral B Shah</a> and <a href="https://github.com/shashi">Shashi Gowda</a>.</p>


</div>



    <div class="footer">
      Julia is a <a href="https://numfocus.org/projects/index.html">NumFocus project</a>.
      We thank <a href="https://fastly.com">Fastly</a> for their generous infrastructural support.
      
      <a href="https://github.com/juliakorea/translate-home/edit/master/src/blog/_posts/2016-08-22-GSoC2016-Graft.md">Edit this page on GitHub.</a>
    </div>

    <!-- Add "contribute" link to the Transifex language dropdown -->
    <script>
      // Create a link element for the translation prompt
      var txPromptLink = document.createElement( "a" );
      txPromptLink.href = "https://www.transifex.com/julialang-i18n/julialang-web/";
      txPromptLink.appendChild( document.createTextNode( "Add your language!" ) );
      txPromptLink.style.fontWeight = "bold";

      // Wrap the translation prompt link in a list item element
      var txPrompt = document.createElement( "li" );
      txPrompt.appendChild( txPromptLink );

      // Add the translation prompt list item to the list of languages
      document.getElementById( "tx-live-lang-picker" ).appendChild( txPrompt );
    </script>

<!--Flipcause Integration v3.0// Flipcause Integration Instructions:
    Install the following code block once in the website Header (after <head> tag) -->

<style>

  .fc-black_overlay{
  display:none; position: fixed; z-index:1000001; top: 0%;left: 0%;width: 100%;height: 100%;
  background-color: black; filter: alpha(opacity=50); cursor:pointer; opacity:0.5;
  }

  .fc-white_content {
  opacity:1; display:none; margin-top: -320px; margin-left: -485px; width:970px; height:640px;
  position:fixed; top:50%; left:50%; border: none;z-index:1000002;overflow: auto;
  }

  .fc-main-box{
  opacity:1; display:none; margin:15px auto 0 auto; width:930px; position:relative; z-index:1000003;
  }

  .fc-widget_close{
  opacity:1; content:url(http://i1338.photobucket.com/albums/o691/WeCause/X_zpse4a7e538.png);
  position:absolute; z-index=1000004; right:-16px; top:-16px; display:block; cursor:pointer;
  }

  .floating_button{
  display: block; margin-top: 0px; margin-left: 0px; width:auto ; height: auto;
  position:fixed; z-index:999999; overflow: auto;
  }

  @keyframes backfadesin {
  from { opacity:0; }
  to {opacity:.5;}
  }

  @-moz-keyframes backfadesin {
  from { opacity:0; }
  to {opacity:.5;}
  }

  @-webkit-keyframes backfadesin {
  from { opacity:0; }
  to {opacity:.5;}
  }

  @-o-keyframes backfadesin {
  from { opacity:0; }
  to {opacity:.5;}
  }


  @-ms-keyframes backfadesin {
  from { opacity:0; }
  to {opacity:.5;}
  }

  @keyframes fadesin {
  0%{ opacity:0; }
  50%{ opacity:0; }
  75% {opacity: 0; transform: translateY(20px);}
  100% {opacity: 1; transform: translateY(0);}
  }

  @-moz-keyframes fadesin {
  0%{ opacity:0; }
  50%{ opacity:0; }
  75% {opacity: 0; -moz-transform: translateY(20px);}
  100% {opacity: 1; -moz-transform: translateY(0);}
  }

  @-webkit-keyframes fadesin {
  0%{ opacity:0; }
  50%{ opacity:0; }
  75% {opacity: 0; -webkit-transform: translateY(20px);}
  100% {opacity: 1; -webkit-transform: translateY(0);}
  }

  @-o-keyframes fadesin {
  0%{ opacity:0; }
  50%{ opacity:0; }
  75% {opacity: 0; -o-transform: translateY(20px);}
  100% {opacity: 1; -o-transform: translateY(0);}
  }

  @-ms-keyframes fadesin {
  0%{ opacity:0; }
  50%{ opacity:0; }
  75% {opacity: 0; -ms-transform: translateY(20px);}
  100% {opacity: 1; -ms-transform: translateY(0);}
  }

</style>

<script>

  function open_window(cause_id) {
  var  protocol=String(document.location.protocol);
  var new_url;
  if( /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)){
  new_url="https://www.flipcause.com/widget/"+cause_id
  window.open(new_url);
  }

  else {
  document.getElementById("fc-fade").style.display = "block";
  document.getElementById("fc-fade").style.webkitAnimation = "backfadesin 1s";
  document.getElementById("fc-fade").style.animation = "backfadesin 1s";
  document.getElementById("fc-fade").style.mozAnimation = "backfadesin 1s";
  document.getElementById("fc-light").style.display = "block";
  document.getElementById("fc-light").style.webkitAnimation = "fadesin 1.5s";
  document.getElementById("fc-light").style.animation = "fadesin 1.5s";
  document.getElementById("fc-light").style.mozAnimation = "fadesin 1.5s";
  document.getElementById("fc-main").style.display = "block";
  document.getElementById("fc-main").style.webkitAnimation = "fadesin 1.5s";
  document.getElementById("fc-main").style.animation = "fadesin 1.5s";
  document.getElementById("fc-main").style.mozAnimation = "fadesin 1.5s";
  document.getElementById("fc-close").style.display = "block";
  document.getElementById("fc-close").style.webkitAnimation = "fadesin 1.5s";
  document.getElementById("fc-close").style.animation = "fadesin 1.5s";
  document.getElementById("fc-close").style.mozAnimation = "fadesin 1.5s";
  document.getElementById("fc-myFrame").style.display = "block";
  document.getElementById("fc-myFrame").style.webkitAnimation = "fadesin 1.5s";
  document.getElementById("fc-myFrame").style.animation = "fadesin 1.5s";
  document.getElementById("fc-myFrame").style.mozAnimation = "fadesin 1.5s";
  document.getElementById("fc-myFrame").src="https://www.flipcause.com/widget/"+cause_id;
  }
  }


  function close_window() {
  document.getElementById("fc-fade").style.display="none";
  document.getElementById("fc-light").style.display="none";
  document.getElementById("fc-main").style.display="none";
  document.getElementById("fc-close").style.display="none";
  document.getElementById("fc-myFrame").style.display="none";
  }

</script>

<div id="fc-fade" class="fc-black_overlay" onclick="close_window()"></div>
<div id="fc-light" class="fc-white_content">
  <div id="fc-main" class="fc-main-box">
    <div id="fc-close" class="fc-widget_close" onclick="close_window()"></div>
    <iframe id="fc-myFrame" iframe height="580" width="925"
            style="border: 0; border-radius: 5px 5px 5px 5px; box-shadow: 0 0 8px rgba(0, 0, 0, 0.5);"
            scrolling="no" src=""></iframe>
  </div>
</div>

<!--END Flipcause Main Integration Code-->

    <div style="background: #ccc; border-radius: 0px 0px 0px 0px; font-weight: normal;
                font-family: Arial, Helvetica, sans-serif; border: none; box-shadow: none;
                left: 50%; margin-left: -72.5px; clear: both; display: block; width: 145px;
                height: 45px; line-height: 2.8; position: relative; font-size: 16px;
                text-align: center; cursor: pointer; color: #fff; text-decoration: none; z-index:1"
         onclick="open_window('MjI1Nw==')">
      Donate Now
    </div>
    
  </div><!-- main wrapper -->
</body>
</html>
